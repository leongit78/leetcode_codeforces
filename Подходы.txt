1) Вычисление кол-ва уникальных элементов в пром-тке [0, ... ,i]

Используются подготовленные массивы.

Код:

vector<int> v(n); // Исходный массив
vector<int> freq(n+1); // Массив, содержит на i-ой позиции кол-во вхождений числа i в исходный массив v(n)
vector<int> distinct(n); // Массив, содежит на i-ой позиции кол-во уникальных элементов в пром-тке [0, ... ,i]

// Конструируем distinct

for(int i = 0; i < n; i++)
{
    cin >> v[i];
    freq[v[i]]++;
    if(freq[v[i]] == 1) distinct[i] = 1; // Если текущее число раньше не встречалось то для текущей позиции d_i = 1, иначе distinct[i] = 0
    distinct[i] += (i ? distinct[i-1] : 0); // начиная с 1-го индекса переносим прошлое кол-во уникальных элементов с предыдущей позиции(таким образом d_i >= d_i-1). Изначально distinct[i] = 0, но если появляется новый уникальный элемент, то строчкой выше мы заносим в distinct[i] значение 1 -> на i-ой позиции уникальных элементов из пром-тка [0, ... ,i] становится на один больше
}